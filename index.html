<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç­‹ãƒˆãƒ¬æˆ¦ç•¥ãƒœãƒ¼ãƒ‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=Roboto:wght@500;700;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #0f172a; /* Slate 900 */
            -webkit-tap-highlight-color: transparent;
        }
        .font-num { font-family: 'Roboto', sans-serif; }

        /* Chart Container */
        .chart-container {
            position: relative;
            width: 100%;
            height: 250px;
            margin: 0 auto;
        }

        /* Custom Scrollbar */
        .hide-scroll::-webkit-scrollbar { display: none; }
        .hide-scroll { -ms-overflow-style: none; scrollbar-width: none; }

        /* Navigation */
        .nav-item {
            position: relative;
            transition: all 0.2s;
            opacity: 0.6;
        }
        .nav-item.active {
            opacity: 1;
            color: #2563eb;
        }
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background-color: #2563eb;
            border-radius: 50%;
        }

        /* Day Selector Fix */
        #day-selector {
            padding-top: 0.5rem; 
            padding-bottom: 0.5rem;
            /* å³å´ã«ååˆ†ãªä½™ç™½ã‚’æŒãŸã›ã¦è¦‹åˆ‡ã‚Œã‚’é˜²ã */
            padding-right: 2rem; 
        }
        /* æœ€å¾Œã®å­è¦ç´ ã«ãƒãƒ¼ã‚¸ãƒ³ã‚’è¿½åŠ ã—ã¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é ˜åŸŸã‚’ç¢ºä¿ */
        #day-selector button:last-child {
            margin-right: 1rem;
        }

        /* Metric Box Mobile Optimized */
        .metric-box {
            background-color: #f1f5f9;
            border-radius: 0.5rem;
            text-align: center;
            padding: 0.3rem 0.1rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
        }
        
        /* Animations */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-enter {
            animation: slideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
    </style>
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="min-h-screen pb-safe">

    <!-- Sticky Header & Nav -->
    <header class="bg-white/95 backdrop-blur-sm sticky top-0 z-50 border-b border-slate-200 shadow-sm">
        <div class="px-4 py-3 flex justify-between items-center">
            <h1 class="text-xl font-black italic text-slate-900 tracking-tighter">
                MUSCLE<span class="text-blue-600">STRATEGY</span>
            </h1>
            <span class="text-[0.6rem] font-bold bg-slate-100 text-slate-500 px-2 py-1 rounded-full">v2.2 Mobile</span>
        </div>
        
        <!-- Mobile Tab Navigation -->
        <nav class="flex justify-around items-center px-2 py-2 text-xs font-bold text-slate-500 border-t border-slate-100">
            <button onclick="switchTab('schedule')" id="nav-schedule" class="nav-item flex-1 py-2 text-center active">
                <span class="block text-lg mb-0.5">ğŸ“…</span>
                é€±é–“ãƒ¡ãƒ‹ãƒ¥ãƒ¼
            </button>
            <button onclick="switchTab('strategy')" id="nav-strategy" class="nav-item flex-1 py-2 text-center">
                <span class="block text-lg mb-0.5">ğŸ’Š</span>
                ã‚µãƒ—ãƒªãƒ»æ „é¤Š
            </button>
            <button onclick="switchTab('nutrition')" id="nav-nutrition" class="nav-item flex-1 py-2 text-center">
                <span class="block text-lg mb-0.5">ğŸ”¢</span>
                è¨ˆç®—æ©Ÿ
            </button>
            <button onclick="switchTab('core')" id="nav-core" class="nav-item flex-1 py-2 text-center">
                <span class="block text-lg mb-0.5">â³</span>
                ã‚¦ã‚¨ã‚¹ãƒˆ
            </button>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="w-full px-4 py-4 max-w-md mx-auto">

        <!-- VIEW: SCHEDULE (Default for Mobile) -->
        <div id="view-schedule" class="view-section animate-enter">
            
            <!-- Day Selector (Scrollable) -->
            <div class="flex overflow-x-auto space-x-3 pl-1 hide-scroll w-full box-border" id="day-selector">
                <!-- Buttons injected via JS -->
            </div>

            <div id="workout-container" class="mt-2">
                <!-- Daily Header -->
                <div class="flex justify-between items-end mb-4 bg-white p-4 rounded-2xl shadow-sm border border-slate-100">
                    <div>
                        <h2 class="text-2xl font-black text-slate-800 leading-none tracking-tight" id="workout-title">PUSH DAY</h2>
                        <p class="text-[0.65rem] font-bold text-slate-400 mt-1 uppercase tracking-widest" id="workout-focus">Chest / Shoulders</p>
                    </div>
                    <div class="text-right">
                         <span class="text-[0.65rem] font-bold bg-blue-50 text-blue-600 px-2 py-1 rounded border border-blue-100" id="workout-cardio">ğŸƒ 30min</span>
                    </div>
                </div>

                <!-- Exercise List -->
                <div class="space-y-3 pb-8" id="workout-list">
                    <!-- Injected JS -->
                </div>
            </div>
        </div>

        <!-- VIEW: SUPPLEMENTS & NUTRITION INFO -->
        <div id="view-strategy" class="view-section hidden">
            
            <!-- Supplements Card -->
            <div class="bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl p-5 text-white shadow-lg mb-6">
                <h2 class="text-lg font-bold mb-4 flex items-center">
                    <span class="mr-2">ğŸ’Š</span> æ¨å¥¨ã‚µãƒ—ãƒªãƒ¡ãƒ³ãƒˆ
                </h2>
                
                <div class="space-y-4">
                    <!-- Creatine -->
                    <div class="flex items-start bg-slate-800/50 p-3 rounded-xl border border-slate-700">
                        <div class="mr-3 text-2xl">âš¡</div>
                        <div>
                            <h3 class="text-sm font-bold text-blue-400">ã‚¯ãƒ¬ã‚¢ãƒãƒ³ (5g/æ—¥)</h3>
                            <p class="text-xs text-slate-300 mt-1 leading-relaxed">
                                ç­‹åŠ›å‡ºåŠ›ã¨ç­‹è‚‰å†…ã®æ°´åˆ†é‡ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚æ¯æ—¥æ‘‚å–ã™ã‚‹ã“ã¨ã§åŠ¹æœã‚’ç™ºæ®ã—ã¾ã™ã€‚
                            </p>
                        </div>
                    </div>

                    <!-- Multivitamin -->
                    <div class="flex items-start bg-slate-800/50 p-3 rounded-xl border border-slate-700">
                        <div class="mr-3 text-2xl">ğŸ›¡ï¸</div>
                        <div>
                            <h3 class="text-sm font-bold text-green-400">ãƒãƒ«ãƒãƒ“ã‚¿ãƒŸãƒ³</h3>
                            <p class="text-xs text-slate-300 mt-1 leading-relaxed">
                                ä»£è¬ã®æ½¤æ»‘æ²¹ã€‚é£Ÿäº‹ã§ä¸è¶³ã—ãŒã¡ãªå¾®é‡æ „é¤Šç´ ã‚’è£œã„ã€ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’æ•´ãˆã¾ã™ã€‚
                            </p>
                        </div>
                    </div>

                    <!-- Whey Protein -->
                    <div class="flex items-start bg-slate-800/50 p-3 rounded-xl border border-slate-700">
                        <div class="mr-3 text-2xl">ğŸ¥¤</div>
                        <div>
                            <h3 class="text-sm font-bold text-orange-400">ãƒ›ã‚¨ã‚¤ãƒ—ãƒ­ãƒ†ã‚¤ãƒ³</h3>
                            <p class="text-xs text-slate-300 mt-1 leading-relaxed">
                                ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç›´å¾Œã®ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¿ã‚¤ãƒ ã«ã€‚å¸åãŒæ—©ãã€ç­‹è‚‰ã®åˆ†è§£ã‚’å³åº§ã«æ­¢ã‚ã¾ã™ã€‚
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <h3 class="text-sm font-black text-slate-800 mb-3 px-1">æ „é¤Šæ‘‚å–ã®åŸºæœ¬ãƒ«ãƒ¼ãƒ«</h3>
            <div class="space-y-3 pb-8">
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                    <div class="text-blue-600 font-black mb-1">01. ã‚¿ãƒ³ãƒ‘ã‚¯è³ª</div>
                    <p class="text-xs text-slate-600 font-bold mb-1">ç›®æ¨™: 160g / æ—¥</p>
                    <p class="text-[0.7rem] text-slate-400">1é£Ÿã§æ‘‚ã‚Šã™ããšã€4-5å›ã«åˆ†ã‘ã¦è¡€ä¸­æ¿ƒåº¦ã‚’ã‚­ãƒ¼ãƒ—ã€‚</p>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                    <div class="text-blue-600 font-black mb-1">02. ç‚­æ°´åŒ–ç‰©</div>
                    <p class="text-xs text-slate-600 font-bold mb-1">é›†ä¸­: ãƒˆãƒ¬å‰ãƒ»ãƒˆãƒ¬å¾Œ</p>
                    <p class="text-[0.7rem] text-slate-400">2æ™‚é–“å‰ã«ãŠã«ãã‚Šç­‰ã€‚ç›´å¾Œã«ç³–è³ªï¼‹ãƒ—ãƒ­ãƒ†ã‚¤ãƒ³ã€‚</p>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                    <div class="text-blue-600 font-black mb-1">03. è„‚è³ª</div>
                    <p class="text-xs text-slate-600 font-bold mb-1">è‰¯è³ªãªæ²¹ã‚’é¸ã¶</p>
                    <p class="text-[0.7rem] text-slate-400">é­šã€ã‚¢ãƒœã‚«ãƒ‰ã€åµã€‚æšã’ç‰©ã¯æ§ãˆã‚‹ã€‚</p>
                </div>
            </div>
        </div>

        <!-- VIEW: CALCULATOR -->
        <div id="view-nutrition" class="view-section hidden">
            <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-5">
                <h3 class="text-lg font-black text-slate-800 mb-4">ãƒã‚¯ãƒ­è¨ˆç®—æ©Ÿ</h3>
                
                <div class="grid grid-cols-2 gap-3 mb-6">
                    <div>
                        <label class="block text-[0.6rem] font-bold text-slate-400 mb-1">èº«é•· (cm)</label>
                        <input type="number" id="input-height" value="170" class="w-full bg-slate-50 border border-slate-200 rounded p-3 font-bold text-slate-800 text-center focus:outline-none focus:border-blue-500" oninput="calculateNutrition()">
                    </div>
                    <div>
                        <label class="block text-[0.6rem] font-bold text-slate-400 mb-1">ä½“é‡ (kg)</label>
                        <input type="number" id="input-weight" value="72" class="w-full bg-slate-50 border border-slate-200 rounded p-3 font-bold text-slate-800 text-center focus:outline-none focus:border-blue-500" oninput="calculateNutrition()">
                    </div>
                </div>

                <div class="text-center mb-6 p-4 bg-slate-50 rounded-xl">
                    <p class="text-[0.6rem] font-bold text-slate-400 uppercase tracking-widest">Target Calories</p>
                    <div class="text-4xl font-black text-slate-800 font-num mt-1" id="display-calories">2,880</div>
                    <div class="text-xs text-slate-400">kcal / day</div>
                </div>

                <div class="chart-container mb-6">
                    <canvas id="nutritionChart"></canvas>
                </div>

                <!-- Stacked Macro List -->
                <div class="space-y-2 pb-8">
                    <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg border border-blue-100">
                        <span class="text-xs font-bold text-blue-500">PROTEIN</span>
                        <span class="text-xl font-black text-slate-800 font-num" id="display-protein">158g</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-yellow-50 rounded-lg border border-yellow-100">
                        <span class="text-xs font-bold text-yellow-600">FAT</span>
                        <span class="text-xl font-black text-slate-800 font-num" id="display-fat">72g</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-orange-50 rounded-lg border border-orange-100">
                        <span class="text-xs font-bold text-orange-500">CARBS</span>
                        <span class="text-xl font-black text-slate-800 font-num" id="display-carbs">402g</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: CORE -->
        <div id="view-core" class="view-section hidden">
            <div class="bg-gradient-to-b from-slate-900 to-slate-800 text-white rounded-2xl p-6 text-center shadow-lg mb-6">
                <div class="text-4xl mb-2">â³</div>
                <h3 class="text-xl font-black mb-1">TINY WAIST</h3>
                <p class="text-slate-400 text-xs">ã‚¦ã‚¨ã‚¹ãƒˆã‚’ç´°ãä¿ã¤ãƒ¡ã‚½ãƒƒãƒ‰</p>
            </div>

            <div class="space-y-4 pb-8">
                <div class="bg-white p-5 rounded-xl border border-slate-100 shadow-sm">
                    <h4 class="font-bold text-blue-600 text-lg mb-2">ãƒ‰ãƒ­ãƒ¼ã‚¤ãƒ³ (Vacuum)</h4>
                    <p class="text-xs text-slate-600 leading-relaxed mb-3">
                        ãŠè…¹ã‚’æ¥µé™ã¾ã§å‡¹ã¾ã›ã¦ã€å¤©ç„¶ã®ã‚³ãƒ«ã‚»ãƒƒãƒˆã€Œè…¹æ¨ªç­‹ã€ã‚’å¼·åŒ–ã—ã¾ã™ã€‚
                    </p>
                    <div class="bg-slate-50 p-3 rounded text-xs font-bold text-slate-500 border border-slate-200 text-center">
                        æ¯ã‚’åããã‚‹ â†’ å‡¹ã¾ã™ â†’ 30ç§’
                    </div>
                </div>

                <div class="bg-white p-5 rounded-xl border border-slate-100 shadow-sm">
                    <h4 class="font-bold text-blue-600 text-lg mb-2">ã‚¯ãƒ©ãƒ³ãƒ (Etching)</h4>
                    <p class="text-xs text-slate-600 leading-relaxed">
                        é‡ã‚Šã¯æŒã¡ã¾ã›ã‚“ã€‚è…¹ç›´ç­‹ã®ã€Œæºã€ã‚’æ·±ãã™ã‚‹ãŸã‚ã€è‡ªé‡ã§20å›ä»¥ä¸Šè¡Œã„ã€ç„¼ã‘ã¤ãæ„Ÿè¦šï¼ˆãƒãƒ¼ãƒ³ï¼‰ã‚’ç‹™ã„ã¾ã™ã€‚
                    </p>
                </div>
            </div>
        </div>

    </main>

    <!-- LOGIC -->
    <script>
        // --- DATA STORE ---
        const appData = {
            schedule: [
                {
                    id: 'mon', day: 'æœˆ', title: 'PUSH DAY', focus: 'èƒ¸ãƒ»è‚©ãƒ»ä¸‰é ­', cardio: 'æœ‰é…¸ç´  30åˆ†',
                    exercises: [
                        { name: 'DB Floor Press', weight: '20-26kg', sets: '3', reps: '8-10', tip: 'åºŠã§è‚˜ã‚’æ­¢ã‚ã¦ãƒ—ãƒ¬ã‚¹' },
                        { name: 'Decline Push-up', weight: 'è‡ªé‡', sets: '3', reps: 'é™ç•Œ', tip: 'è¶³ã‚’æ¤…å­ã«ä¹—ã›ã‚‹' },
                        { name: 'DB Shoulder Press', weight: '14-20kg', sets: '3', reps: '10-12', tip: 'åº§ã£ã¦è¡Œã†' },
                        { name: 'Side Raise', weight: '5-8kg', sets: '4', reps: '15-20', tip: 'åå‹•ç¦æ­¢ãƒ»ä¸å¯§ã«è¡Œã†' },
                        { name: 'French Press', weight: '10-14kg', sets: '3', reps: '15', tip: 'è‚˜ã‚’å›ºå®šã™ã‚‹' }
                    ]
                },
                {
                    id: 'tue', day: 'ç«', title: 'PULL DAY', focus: 'èƒŒä¸­ãƒ»äºŒé ­', cardio: 'ãªã—',
                    exercises: [
                        { name: 'One-Hand Row', weight: '20-28kg', sets: '3', reps: '10-12', tip: 'æ¤…å­ã«æ‰‹ã‚’ã¤ã' },
                        { name: 'DB Pullover', weight: '14-18kg', sets: '3', reps: '12-15', tip: 'åºƒèƒŒç­‹ã‚’ä¼¸ã°ã™' },
                        { name: 'Rear Delt Raise', weight: '4-7kg', sets: '3', reps: '15-20', tip: 'å‰å‚¾å§¿å‹¢ã§' },
                        { name: 'DB Shrug', weight: '20-30kg', sets: '3', reps: '15', tip: 'ãƒˆãƒƒãƒ—ã§æ­¢ã‚ã‚‹' },
                        { name: 'DB Curl', weight: '10-14kg', sets: '3', reps: '12-15', tip: 'å°æŒ‡ã‚’å·»ãè¾¼ã‚€' }
                    ]
                },
                {
                    id: 'wed', day: 'æ°´', title: 'LEGS DAY', focus: 'è„šãƒ»è…¹', cardio: 'æœ‰é…¸ç´  30åˆ†',
                    exercises: [
                        { name: 'Bulgarian Squat', weight: '10-16kg', sets: '3', reps: '10/è¶³', tip: 'å¾Œã‚è¶³ã‚’æ¤…å­ã«' },
                        { name: 'Goblet Squat', weight: '20-30kg', sets: '3', reps: '15-20', tip: 'èƒ¸ã§ãƒ€ãƒ³ãƒ™ãƒ«ã‚’æŒã¤' },
                        { name: 'DB RDL', weight: '20-26kg', sets: '3', reps: '12-15', tip: 'ã‚‚ã‚‚è£ã‚¹ãƒˆãƒ¬ãƒƒãƒ' },
                        { name: 'Calf Raise', weight: '10kg', sets: '3', reps: '20', tip: 'å£ã«æ‰‹ã‚’ã¤ã' },
                        { name: 'Crunch', weight: 'è‡ªé‡', sets: '3', reps: 'é™ç•Œ', tip: 'ä¼‘æ†©ä¸­ã«ãƒ‰ãƒ­ãƒ¼ã‚¤ãƒ³' }
                    ]
                },
                {
                    id: 'thu', day: 'æœ¨', title: 'REST', focus: 'å®Œå…¨ä¼‘é¤Š', cardio: 'æ•£æ­©(ä»»æ„)',
                    exercises: [
                        { name: 'Stretching', weight: '-', sets: '1', reps: '20min', tip: 'å…¨èº«ã®ã‚±ã‚¢' }
                    ]
                },
                {
                    id: 'fri', day: 'é‡‘', title: 'UPPER', focus: 'å¼±ç‚¹ç‰¹åŒ–', cardio: 'æœ‰é…¸ç´  30åˆ†',
                    exercises: [
                        { name: 'Arnold Press', weight: '12-16kg', sets: '3', reps: '10-12', tip: 'å›è»¢ã•ã›ã¦ãƒ—ãƒ¬ã‚¹' },
                        { name: 'Side Raise (Vol)', weight: '5-8kg', sets: '5', reps: '15-20', tip: 'é«˜ãƒœãƒªãƒ¥ãƒ¼ãƒ ' },
                        { name: 'Incline Push-up', weight: 'è‡ªé‡', sets: '3', reps: 'é™ç•Œ', tip: 'æ‰‹ã‚’æ¤…å­ã«ä¹—ã›ã‚‹' },
                        { name: 'One-Hand Row', weight: '18-24kg', sets: '3', reps: '12-15', tip: 'ä¸å¯§ã«å¼•ã' }
                    ]
                },
                {
                    id: 'sat', day: 'åœŸ', title: 'LOWER', focus: 'è„šãƒ»ä½“å¹¹', cardio: 'ãªã—',
                    exercises: [
                        { name: 'Lunge Walk', weight: '8-14kg', sets: '3', reps: '20æ­©', tip: 'å¤§è‚¡ã§æ­©ã' },
                        { name: 'Hip Thrust', weight: '10-20kg', sets: '3', reps: '12-15', tip: 'èƒŒä¸­ã‚’æ¤…å­ã«' },
                        { name: 'Plank', weight: 'è‡ªé‡', sets: '3', reps: '60s', tip: 'èº«ä½“ã‚’ä¸€ç›´ç·šã«' },
                        { name: 'Reverse Crunch', weight: 'è‡ªé‡', sets: '3', reps: '15-20', tip: 'ä¸‹è…¹éƒ¨ç‹™ã„' }
                    ]
                },
                {
                    id: 'sun', day: 'æ—¥', title: 'REST', focus: 'å®Œå…¨ä¼‘é¤Š', cardio: 'ãªã—',
                    exercises: [
                        { name: 'Relax', weight: '-', sets: '-', reps: '-', tip: 'é£Ÿäº‹æº–å‚™ãªã©' }
                    ]
                }
            ]
        };

        // --- STATE & INIT ---
        let currentTab = 'schedule'; // Mobile Default: Schedule
        let currentDayId = 'mon';
        let donutChart = null;

        document.addEventListener('DOMContentLoaded', () => {
            renderDaySelector();
            renderWorkoutDay('mon');
            initChart();
            calculateNutrition();
            switchTab('schedule');
        });

        // --- NAVIGATION ---
        function switchTab(tabId) {
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`nav-${tabId}`).classList.add('active');
            
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            const view = document.getElementById(`view-${tabId}`);
            view.classList.remove('hidden');
            
            view.classList.remove('animate-enter');
            void view.offsetWidth; 
            view.classList.add('animate-enter');
        }

        // --- SCHEDULE RENDERER ---
        function renderDaySelector() {
            const container = document.getElementById('day-selector');
            container.innerHTML = appData.schedule.map(day => `
                <button 
                    onclick="renderWorkoutDay('${day.id}')"
                    class="day-btn-item flex-shrink-0 w-14 h-16 rounded-xl flex flex-col items-center justify-center transition-all duration-200 border border-slate-100 shadow-sm ${day.id === currentDayId ? 'bg-slate-800 text-white transform -translate-y-1 shadow-md ring-2 ring-slate-800 ring-offset-2' : 'bg-white text-slate-400'}"
                    id="btn-${day.id}"
                >
                    <span class="text-xs font-black mb-1">${day.day}</span>
                    <span class="text-[0.65rem] opacity-60 font-bold uppercase">${day.id}</span>
                </button>
            `).join('');
        }

        function renderWorkoutDay(dayId) {
            currentDayId = dayId;
            // Update buttons styling manually for perf
            document.querySelectorAll('.day-btn-item').forEach(btn => {
                btn.className = 'day-btn-item flex-shrink-0 w-14 h-16 rounded-xl flex flex-col items-center justify-center transition-all duration-200 border border-slate-100 shadow-sm bg-white text-slate-400';
            });
            const activeBtn = document.getElementById(`btn-${dayId}`);
            activeBtn.className = 'day-btn-item flex-shrink-0 w-14 h-16 rounded-xl flex flex-col items-center justify-center transition-all duration-200 border border-slate-100 bg-slate-800 text-white transform -translate-y-1 shadow-md ring-2 ring-slate-800 ring-offset-1';

            const dayData = appData.schedule.find(d => d.id === dayId);
            
            document.getElementById('workout-title').innerText = dayData.title;
            document.getElementById('workout-focus').innerText = dayData.focus;
            document.getElementById('workout-cardio').innerText = dayData.cardio;

            const listEl = document.getElementById('workout-list');
            listEl.innerHTML = dayData.exercises.map(ex => `
                <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-100 flex flex-col relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-1 h-full bg-slate-800"></div>
                    
                    <!-- Header -->
                    <div class="pl-3 mb-3">
                        <h4 class="font-black text-slate-800 text-lg leading-tight">${ex.name}</h4>
                        <p class="text-xs font-bold text-slate-400 mt-1">ğŸ’¡ ${ex.tip}</p>
                    </div>

                    <!-- Metrics Grid -->
                    <div class="grid grid-cols-3 gap-2 pl-3">
                        <div class="metric-box">
                            <span class="text-[0.55rem] font-bold text-slate-400 uppercase">Weight</span>
                            <span class="text-sm font-black text-slate-800 font-num">${ex.weight}</span>
                        </div>
                        <div class="metric-box">
                            <span class="text-[0.55rem] font-bold text-slate-400 uppercase">Sets</span>
                            <span class="text-sm font-black text-slate-800 font-num">${ex.sets}</span>
                        </div>
                        <div class="metric-box">
                            <span class="text-[0.55rem] font-bold text-slate-400 uppercase">Reps</span>
                            <span class="text-sm font-black text-slate-800 font-num">${ex.reps}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // --- NUTRITION ---
        function calculateNutrition() {
            const h = document.getElementById('input-height').value;
            const w = document.getElementById('input-weight').value;
            if(!w || w <= 0) return;

            const proteinG = Math.round(w * 2.2);
            const fatG = Math.round(w * 1.0);
            const totalCals = Math.round(w * 40); 
            
            const pCals = proteinG * 4;
            const fCals = fatG * 9;
            const remainderCals = totalCals - pCals - fCals;
            const carbG = Math.round(remainderCals / 4);

            document.getElementById('display-calories').innerText = totalCals.toLocaleString();
            document.getElementById('display-protein').innerText = proteinG + 'g';
            document.getElementById('display-fat').innerText = fatG + 'g';
            document.getElementById('display-carbs').innerText = carbG + 'g';

            if(donutChart) {
                donutChart.data.datasets[0].data = [proteinG, fatG, carbG];
                donutChart.update();
            }
        }

        function initChart() {
            const ctx = document.getElementById('nutritionChart').getContext('2d');
            Chart.defaults.font.family = "'Roboto', sans-serif";
            
            donutChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Protein', 'Fat', 'Carbs'],
                    datasets: [{
                        data: [158, 72, 400],
                        backgroundColor: ['#3b82f6', '#eab308', '#f97316'],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    responsive: true,
                    cutout: '75%',
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }
    </script>
</body>
</html>